/*!
 * jQuery cForms v1.2.6
 * http://cforms.jacksbox.de
 *
 * Author: Mario JÃ¤ckle
 * eMail: support@jacksbox.de
 *
 * Copyright 2015, jacksbox.design
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */
!function(e){e.cForm=function(a,t){var i=this;i.$element=e(a),i.element=a,i.$element.data("cForm",i),i.init=function(){i.options=e.extend({},e.cForm.defaultOptions,i.options),i.options.templates=e.extend({},e.cForm.defaultOptions.templates,i.options.templates);var a=["input","textarea","select","button"];if(i.radioGroupArray=[],i.$element.is(a.join())){var t=i.tagName(i.$element);"input"===t&&i.identifyInputType(i.$element),"select"===t&&i.handleSelect(i.$element),"button"===t&&i.handleButton(i.$element),"textarea"===t&&i.handleTextarea(i.$element)}else i.$element.find("input").each(function(){i.identifyInputType(e(this))}),i.$element.find("select").each(function(){i.handleSelect(e(this))}),i.$element.find("button").each(function(){i.handleButton(e(this))}),i.$element.find("textarea").each(function(){i.handleTextarea(e(this))})},i.identifyInputType=function(e){var a=e.attr("type");if("undefined"==typeof a&&a===!1)return console.log("Error: Missing type-Attribute on input!"),!1;switch(a){case"password":case"text":i.handleInputText(e,a);break;case"file":i.handleInputFile(e);break;case"checkbox":i.handleInputCheckbox(e);break;case"radio":i.handleInputRadio(e);break;case"submit":i.handleInputSubmit(e);break;default:console.log("Error: No matching was found - You will be forever alone!")}},i.handleButton=function(e){var a=i.options.templates.button;e.wrap(a)},i.handleInputSubmit=function(e){var a=i.options.templates.submit;e.wrap(a)},i.handleInputText=function(e,a){var t=i.options.templates[a];e.wrap(t)},i.handleTextarea=function(e){var a=i.options.templates.textarea;e.wrap(a)},i.inputData=function(a){return this.name=a.attr("name"),this.value=a.attr("value"),this.checked=a.attr("checked"),this.template=i.options.templates[a.attr("type")],this.$html=e(),"undefined"==typeof this.name&&this.name===!1&&(this.name=""),"undefined"==typeof this.value&&this.value===!1&&(this.value=""),"undefined"==typeof this.checked&&this.checked===!1&&(this.checked=""),this},i.handleInputFile=function(a){var t=i.inputData(a);t.$html=e(t.template.replace("{{name}}",t.name)),t.$html.bind("click",{$node:a},function(e){var a=e.data.$node;a.trigger("click")}),a.bind("change",{$html:t.$html},function(a){var t=e(this).val().split("\\").pop(),i=a.data.$html;i.addClass("filled").find(".cform-filename").text(t)}),i.addToDom(a,t.$html)},i.handleInputCheckbox=function(a){var t=i.inputData(a);t.$html=e(t.template.replace("{{name}}",t.name).replace("{{value}}",t.value)),(t.checked||"checked"===t.checked)&&t.$html.addClass("checked").data("checked",!0),t.$html.bind("click",{$origin:a},function(a){var t=e(this),i=a.data.$origin,l=t.data("checked");l?(i.prop("checked",!1),t.removeClass("checked").data("checked",!1)):(i.prop("checked",!0),t.addClass("checked").data("checked",!0))}),a.bind("change",{$mirror:t.$html},function(a){var t=e(this),i=a.data.$mirror;t.prop("checked")?i.addClass("checked").data("checked",!0):i.removeClass("checked").data("checked",!1)}),i.addToDom(a,t.$html)},i.handleInputRadio=function(a){var t=i.inputData(a);if(i.radioGroupArray.indexOf(t.name)>-1)return!1;i.radioGroupArray.push(t.name);var l=e();$nodes=i.$element.find('input[type="radio"][name="'+t.name+'"]'),$nodes.each(function(){var a=e(this),i=a.val(),n=a.attr("checked"),d=e();d=e(t.template.replace("{{name}}",t.name).replace("{{value}}",i)),n&&d.addClass("checked").data("checked","true"),l=l.add(d),a.addClass("cform-hidden").after(d)}),l.bind("click",{$mirrors:l,$origins:$nodes},function(a){var t=e(this),i=a.data.$mirrors,l=a.data.$origins,n=t.data("value");return t.data("checked")?!0:(i.removeClass("checked").data("checked",!1),t.addClass("checked").data("checked",!0),void l.prop("checked",!0).filter('[value="'+n+'"]').prop("checked",!0))}),$nodes.bind("change",{$mirrors:l,$origins:$nodes},function(a){var t=e(this),i=a.data.$mirrors,l=(a.data.$origins,t.val());return t.data("checked")?!0:void i.removeClass("checked").data("checked",!1).filter('[data-value="'+l+'"]').data("checked",!0).addClass("checked")}),i.addToDom(a,t.$html)},i.handleSelect=function(a){var t=i.inputData(a);t.multiple=a.attr("multiple"),t.$subnodes=a.find("option"),t.$selected=t.$subnodes.filter(":selected"),t.optionsHtml="",t.$options=e(),t.cssclass="",(a.hasClass("disabled")||a.is("[disabled=disabled]"))&&(t.cssclass="disabled",a.addClass("disabled")),"undefined"==typeof t.multiple||t.multiple===!1?(t.multiple=!1,t.template=i.options.templates.select,t.$html=e(t.template.replace("{{name}}",t.name).replace("{{text}}",t.$selected.html()).replace("{{class}}",t.cssclass))):(t.multiple=!0,t.template=i.options.templates.multiselect,t.$html=e(t.template.replace("{{name}}",t.name).replace("{{class}}",t.cssclass))),t.$subnodes.each(function(a){var l=e(this),n=l.prop("selected")?"selected":"",d=i.options.templates.option;d=d.replace("{{value}}",l.val()).replace("{{text}}",l.html()).replace("{{class}}",n),t.optionsHtml+=d}),t.$options=e(t.optionsHtml).filter("li"),t.$html.find(".cform-control").bind("click",{$origin:a,$mirror:t.$html},function(a){var t=a.data.$origin,i=a.data.$mirror;return t.hasClass("disabled")||t.is("[disabled=disabled]")?!1:(i.addClass("active"),void e(document).bind("click.cForm",{$mirror:i},function(a){i=a.data.$mirror,e(a.target).closest(".cform-select").length||(i.removeClass("active"),e(document).unbind("click.cForm"))}))}),t.$options.bind("click",{$origin:a,$mirror:t.$html,$options:t.$options,multiple:t.multiple},function(a){var t=e(this),i=a.data.$origin,l=a.data.$mirror,n=a.data.$options,d=a.data.multiple,s=t.data("value"),o=t.html();if(!t.hasClass("disabled")&&!t.is("[disabled=disabled]")){if(d){var c=[];t.hasClass("selected")?(c=i.val(),c.splice(c.indexOf(s),1),i.val(c),l.data("value",c),t.removeClass("selected")):(c=i.val()?i.val():[],c.push(s),i.val(c),l.data("value",c),t.addClass("selected"))}else n.not(t).removeClass("selected"),t.addClass("selected"),i.val(s),l.data("value",s).removeClass("active").find(".cform-control .text").html(o);i.trigger("cFormChanged")}}),a.bind("change",{$origin:a,$mirror:t.$html,$options:t.$options,multiple:t.multiple},function(a){var t=e(this),i=t.val(),l=t.find('option[value="'+i+'"]').html(),n=a.data.$origin,d=a.data.$mirror,s=a.data.$options,o=a.data.multiple;if(o){var c=n.val()?n.val():[],r=0;for(d.data("value",c),s.removeClass("selected"),r=0;r<c.length;r++)s.filter('[data-value="'+c[r]+'"]').addClass("selected")}else d.data("value",i).find(".cform-control .text").html(l),s.removeClass("selected").filter('[data-value="'+i+'"]').addClass("selected")}),a.bind("updateAttributes",{$origin:a,$mirror:t.$html,$options:t.$options,multiple:t.multiple},function(a){var t=e(this),i=t.val(),l=(t.find('option[value="'+i+'"]').html(),a.data.$origin),n=a.data.$mirror,d=a.data.$options,s=(a.data.multiple,l.find("option")),o=n.find("li");d.each(function(e){var a=s.eq(e).data();o.eq(e).data(a);var t=s.eq(e).prop("disabled");t?o.eq(e).addClass("disabled"):o.eq(e).removeClass("disabled")})}),t.$html.find("ul").append(t.$options),i.addToDom(a,t.$html)},i.addToDom=function(e,a){e.addClass("cform-hidden").after(a)},i.tagName=function(e){return e.prop("tagName").toLowerCase()},i.init()},e.cForm.defaultOptions={templates:{text:'<div class="cform-text"></div>',textarea:'<div class="cform-text"></div>',password:'<div class="cform-text cform-password"></div>',file:'<div class="cform-file" data-name="{{name}}">    							<div class="cform-control">choose file</div>    							<div class="cform-filename"> click here</div>    						</div>',checkbox:'<div class="cform-checkbox" data-name="{{name}}" data-value="{{value}}">    							<div class="cform-marker"></div>    						</div>',radio:'<div class="cform-radio" data-name="{{name}}" data-value="{{value}}">    							<div class="cform-marker"></div>    						</div>',select:'<div class="cform-select {{class}}" data-name="{{name}}">    							<div class="cform-control"><span class="text">{{text}}</span><span class="chevron bottom"></span></div>    							<ul></ul>    						</div>',multiselect:'<div class="cform-multiselect" data-name="{{name}}">    							<ul></ul>    						</div>',option:'<li data-value="{{value}}" class="{{class}}">{{text}}</li>',button:'<div class="cform-button"></div>',submit:'<div class="cform-submit"></div>'}},e.fn.cForm=function(a){return this.each(function(){new e.cForm(this,a)})}}(jQuery);